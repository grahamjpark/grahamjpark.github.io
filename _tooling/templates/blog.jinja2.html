<!DOCTYPE html>
<html lang='en'>

<head>
    <meta charset='UTF-8' />
    <title>{{ title }} - Graham Park</title>
    <link rel='stylesheet' href='page.css' />
    <link rel='stylesheet' href='blog.css' />
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0' />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <script>
        window.sa_event = window.sa_event || function () {
            a = [].slice.call(arguments);
            sa_event.q ? sa_event.q.push(a) : sa_event.q = [a]
        };
    </script>
    <script data-skip-dnt="true" async defer src="https://park.grahamjpark.com/latest.js"></script>
    <link rel="stylesheet"
        href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/styles/default.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</head>

<body>
    {% include 'header.jinja2.html' %}
    <div class="article-container">
        <article>
            <h1 class="title">{{ title }}</h1>
            <p class='subtitle'>Published on {{ date }}</p>
            {{ post_body }}
        </article>
    </div>
    <div class="article-container">
        <article>
            <p style="text-align: center;">Follow me on  
                <a href='https://mastodon.social/@grahamjpark' target="_blank"
                onclick="sa_event('outbound_subscribe_mastodon');">Mastodon</a>,
                <a href='https://grahamjpark.com/blog/rss.xml' target="_blank"
                onclick="sa_event('outbound_subscribe_rss');">RSS</a>, or via email:</p>
            <div class="email-signup">
                <link rel="stylesheet" href="https://emailoctopus.com/bundles/emailoctopuslist/css/formEmbed.css">
                <div class="email-octopus-form-wrapper">
                    <form method="post"
                        action="https://emailoctopus.com/lists/edec4466-96cf-11ea-a3d0-06b4694bee2a/members/embedded/1.3/add"
                        class="email-octopus-form" data-sitekey="6LdYsmsUAAAAAPXVTt-ovRsPIJ_IVhvYBBhGvRV6">

                        <div class="email-octopus-form-row">
                            <label for="field_0">Email address</label>
                            <input id="field_0" name="field_0" type="email" placeholder="">
                        </div>

                        <div class="email-octopus-form-row-hp" aria-hidden="true">
                            <!-- Do not remove this field, otherwise you risk bot sign-ups -->
                            <input type="text" name="hpedec4466-96cf-11ea-a3d0-06b4694bee2a" tabindex="-1"
                                autocomplete="nope">
                        </div>

                        <div class="email-octopus-form-row-subscribe">
                            <input type="hidden" name="successRedirectUrl" value="">
                            <button type="submit" style="cursor: pointer;">Subscribe</button>
                        </div>
                    </form>
                    <p class="email-octopus-success-message"></p>
                    <p class="email-octopus-error-message"></p>
                </div>
                <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
                <script src="https://emailoctopus.com/bundles/emailoctopuslist/js/1.4/formEmbed.js"></script>
            </div>
        </article>
    </div>
    <script>
        (function createEvents() {
            var outbound_links = {}
            var a = document.getElementsByTagName("article")[0].getElementsByTagName("a");
            for (var i = 0; i < a.length; i++) {
                var link = a[i];
                if (/^http/i.test(link.href)) {
                    let title = "{{ title }}".replace(/\s/g, '').toLowerCase();
                    let host = link.host.replace(/^(www|l|m)\./, "");
                    let count = 0;
                    if (host in outbound_links) {
                        outbound_links[host] += 1;
                        count = outbound_links[host];
                    } else {
                        outbound_links[host] = 0;
                    }
                    var event = "outbound_" + title + "_" + host + "_" + count;
                    link.setAttribute("target", "_blank");
                    link.setAttribute("onclick", "sa_event('" + event + "');");
                }
            }
        })();
    </script>
</body>

</html>